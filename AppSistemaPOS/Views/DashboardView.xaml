<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:AppSistemaPOS.ViewModels"
             x:Class="AppSistemaPOS.Views.DashboardView"
             Title="Inicio">

    <ScrollView>
        <VerticalStackLayout Spacing="20" Padding="20">

            <!-- Encabezado -->
            <Frame BackgroundColor="{StaticResource Primary}" CornerRadius="15" HasShadow="True" Padding="20">
                <VerticalStackLayout>
                    <Label Text="{Binding NombreUsuario}" TextColor="White" FontSize="22" FontAttributes="Bold"/>
                    <Label Text="{Binding FechaHoy}" TextColor="{StaticResource Secondary}" FontSize="14"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Resumen -->
            <Grid ColumnDefinitions="*,*" ColumnSpacing="15">
                <Frame Grid.Column="0" BackgroundColor="White" CornerRadius="10" HasShadow="True">
                    <VerticalStackLayout Spacing="5">
                        <Label Text="Ventas Hoy" TextColor="Gray" FontSize="12"/>
                        <Label Text="{Binding VentasHoy, StringFormat='${0:F2}'}" TextColor="{StaticResource Primary}" FontSize="24" FontAttributes="Bold"/>
                    </VerticalStackLayout>
                </Frame>
                <Frame Grid.Column="1" BackgroundColor="White" CornerRadius="10" HasShadow="True">
                    <VerticalStackLayout Spacing="5">
                        <Label Text="Transacciones" TextColor="Gray" FontSize="12"/>
                        <Label Text="{Binding TransaccionesHoy}" TextColor="{StaticResource Primary}" FontSize="24" FontAttributes="Bold"/>
                    </VerticalStackLayout>
                </Frame>
            </Grid>

            <!-- Acciones Rápidas -->
            <Label Text="Acciones Rápidas" FontAttributes="Bold" FontSize="18" Margin="0,10,0,0"/>
            
            <Grid ColumnDefinitions="*,*" ColumnSpacing="15">
                <!-- Botón para ir a Entrada de Inventario -->
                <Button Grid.Column="0" 
                        Text="Nueva venta" 
                        Command="{Binding IrAVentasCommand}"
                        BackgroundColor="{StaticResource Tertiary}"
                        HeightRequest="60"/>

                <Button Grid.Column="1" 
                        Text="Reportes Venta" 
                        Command="{Binding IrAReportesCommand}"
                        BackgroundColor="{StaticResource Primary}"
                        HeightRequest="60"/>
            </Grid>

            <Button Text="Reporte Entradas Inventario" 
                    Command="{Binding IrAReporteEntradasCommand}"
                    BackgroundColor="{StaticResource Secondary}"
                    TextColor="{StaticResource PrimaryDarkText}"/>


            <!-- Alertas de Stock -->
            <Label Text="Alertas de Stock" FontAttributes="Bold" FontSize="18" Margin="0,10,0,0" TextColor="Red"/>
            <CollectionView ItemsSource="{Binding Alertas}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Margin="0,5" Padding="10" BackgroundColor="#FFEBEE" BorderColor="Red" HasShadow="False">
                            <Label Text="{Binding .}" TextColor="Red" />
                            
                            
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>


            <Grid ColumnDefinitions="*,*" ColumnSpacing="15">
                <!-- Botón para ir a Entrada de Inventario -->
                <Button Grid.Column="0" 
                        Text="Recibir Mercancía" 
                        Command="{Binding IrAEntradaInventarioCommand}"
                        BackgroundColor="{StaticResource Tertiary}"
                        HeightRequest="60"/>

                <Button Grid.Column="1" 
                        Text="Ver Inventario" 
                        BackgroundColor="{StaticResource Secondary}"
                        Command="{Binding IrAInventarioCommand}"
                        TextColor="{StaticResource PrimaryDarkText}"
                        HeightRequest="60"/>
            </Grid>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>